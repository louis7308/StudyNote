트래픽이 많은 웹사이트의 서버 를 도와주는 비동기 이벤트 기반구조으 ㅣ웹 서버 프로그램이다.
고성능 확장성 고가용성 웹서버, 역방향 프록시 서버 및 웹 가속기(HTTP 로드밸런서 , 콘텐츠 캐시 등의 기능 결합이다)라고 소개하고있따.

Nginx는 WEb Server인데 단순히 정적 파일 응답


아파치는 요창이 들어오면 커넥션을 형성하기 위해 새로운 프로세스를 계속 생성한다
프로세스 생성시간이 오래 걸려 요청이 들어오기전 프로세스를 미리 생성하는 PREFORK 방식을 ㅅ ㅏ용


아파치는 C10K 문제가 발생했다
1999년 부터 서버 트래픽 량이 높아져서 서버에 동시 연결된 커넥션이 많아지면서
커넥션마다 프로세스를 할당하기에 메모리 부족 문제 발생
확장성이라는 장점이 프로세스의 리소스 양을 늘려서 무거운 프로그램이 되었음
많은 커넥션에서 요청이 들어오면 CPU 부하가 높아짐
즉 수많은 동시 커넥션을 감당하기엔 ㄴ아파치 서버의 구조가 적합 하지 않음


이를 보완하기 위한 소프트웨어가 NGINX가

정적 파일 (HTML, CSS, JS)
알아서 NGINX가 처리 아파치 서버의 부하를 줄임
동적 파일 요청을 받을 때만 아파치 커넥션을 형성

NGINX는 가장 먼저 마스터 프로세스 라는 것을 볼 수 있다.
설정 파일을 읽고 워커 프로세르르 생설ㅇ하는 프로세스이다.

워커 프로세스가 실제로 일을 하는 역활이고, 워커 프로세스가 생성될 때 각자 listen 소켓을 배정받는다.

Keep Alive 시간 만큼 유지되거나
워커 프로세스가 하나만 요청을 담당하지 않고
이미 만들어진 커넥션에 들어온 요청을 처리


커넥션 형성과 제거, 새로운 요청을 처리하는 것을 이벤트 라고 한다
이벤트들은 OS 커널이 큐 g형식으로 워커 프로세스 에게 전달한다
이벤트는 큐에 담긴 상태에서 워커 프로세스가 처리할 때 까진 비동기 방식으로 대기한다.
하나의 스레드로 이벤트를 꺼내서 처리한다.


## [NGINX 기능](https://ssdragon.tistory.com/60#NGINX%--%EA%B-%B-%EB%-A%A-)

- 웹 서버
- 로드 밸런서
- 웹 서버 가속기
- SSL 터미네이션 : 클라이언트와 https 통신하고, 서버와 http 통신하는 것
- 캐싱 : http 프로토콜을 사용하여 전달하는 콘텐츠를 캐싱할 수 있음, 한 번 서버에서 응답받은 것을 스스로 보관하고 클라이언트에 전달함.
- HSTS(HTTP Strict Transport Security)
- CORS 처리
- TCP/UDP 커넥션 부하 분산
- HTTP/2 등
이 지표는 동시 커넥션 수당 메모리 사용률인데 Nginx는 동시 커넥션이 많아져도 메모리 사용률이 낮고 일정하지만

아파치 서버는 많이 사용하고 있다.
'
동시 커넥션 수가 많아졌을 때 처리하는 초당 요청 수는 Nginx가 많고 아파치는 낮다. 최소 2배 이상 차이가 난다.

이 지표들은 Nginx가 커넥션 관리를 얼마나 잘하는지 보여준다.


## 그래서 왜 NGINX가 중요한가?
NGINX는 아파치와 달리 커넥션을 work process에서 queue로 관리하고 있으면서, 정적파일들은 Nginx에서 따로 처리하여 WAS 서버에 부하를 줄여 줄 수 있다. 또한 아파치는 하나의 요청당 하나의 프로세스를 생성하여 커넥션을 유지해야 하지만 Nginx는 커넥션을 비동기로 처리하고 있고 커넥션 수가 메모리 사용률이 낮고 일정하다.